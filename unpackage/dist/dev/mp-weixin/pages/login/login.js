(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{170:function(e,n,r){"use strict";(function(e){r(5);t(r(3));var n=t(r(171));function t(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=r,e(n.default)}).call(this,r(1)["createPage"])},171:function(e,n,r){"use strict";r.r(n);var t=r(172),o=r(174);for(var u in o)"default"!==u&&function(e){r.d(n,e,(function(){return o[e]}))}(u);r(176);var a,i=r(11),s=Object(i["default"])(o["default"],t["render"],t["staticRenderFns"],!1,null,"b237504c",null,!1,t["components"],a);s.options.__file="pages/login/login.vue",n["default"]=s.exports},172:function(e,n,r){"use strict";r.r(n);var t=r(173);r.d(n,"render",(function(){return t["render"]})),r.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),r.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),r.d(n,"components",(function(){return t["components"]}))},173:function(e,n,r){"use strict";var t;r.r(n),r.d(n,"render",(function(){return o})),r.d(n,"staticRenderFns",(function(){return a})),r.d(n,"recyclableRender",(function(){return u})),r.d(n,"components",(function(){return t}));try{t={uNotify:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-notify/u-notify")]).then(r.bind(null,398))},"u-Form":function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u--form/u--form")]).then(r.bind(null,406))},uFormItem:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(r.bind(null,412))},"u-Input":function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u--input/u--input")]).then(r.bind(null,321))},uButton:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-button/u-button")]).then(r.bind(null,420))},uSteps:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-steps/u-steps")]).then(r.bind(null,430))},uStepsItem:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-steps-item/u-steps-item")]).then(r.bind(null,438))},uRadioGroup:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-radio-group/u-radio-group")]).then(r.bind(null,446))},uRadio:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-radio/u-radio")]).then(r.bind(null,454))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.isloginorregister=1},e.e1=function(n){e.indexnum=0},e.e2=function(n){e.indexnum=1},e.e3=function(n){e.isloginorregister=0})},u=!1,a=[];o._withStripped=!0},174:function(e,n,r){"use strict";r.r(n);var t=r(175),o=r.n(t);for(var u in t)"default"!==u&&function(e){r.d(n,e,(function(){return t[e]}))}(u);n["default"]=o.a},175:function(e,n,r){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o(r(36));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,n,r,t,o,u,a){try{var i=e[u](a),s=i.value}catch(c){return void r(c)}i.done?n(s):Promise.resolve(s).then(t,o)}function a(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){u(a,t,o,i,s,"next",e)}function s(e){u(a,t,o,i,s,"throw",e)}i(void 0)}))}}var i={data:function(){var e=this,n=function(n,r,t){""===r?t(new Error("请输入您的密码")):(""!==e.regForm.reg_checkPassword&&e.$refs.regRef.validateField("reg_checkPassword"),t())},r=function(n,r,t){""===r?t(new Error("请再次输入您的密码")):r!==e.regForm.reg_password?t(new Error("两次输入密码不一致!")):t()};return{isloginorregister:0,userdata:{nickname:"",photo:"",sex:"",introduction:""},indexnum:0,loginForm:{username:"",password:""},regForm:{reg_username:"",reg_password:"",reg_checkPassword:""},regdataForm:{reg_nickname:"",reg_sex:1,reg_phone:""},loginrules:{username:[{type:"string",required:!0,message:"请输入账号",trigger:["blur","change"]},{min:3,max:8,message:"账号长度在3-8个字符之间"},{pattern:/^[0-9a-zA-Z]*$/g,transform:function(e){return String(e)},message:"只能包含字母或数字"}],password:[{type:"string",required:!0,message:"请输入密码",trigger:["blur","change"]},{min:6,max:15,message:"密码长度在6-15个字符之间"}]},regdatarules:{reg_nickname:[{min:3,max:8,message:"昵称长度在3-8个字符之间",trigger:["blur","change"]},{type:"string",max:8,required:!0,message:"请输入昵称",trigger:["blur","change"]}]},regrules:{reg_username:[{min:3,max:8,message:"账号长度在3-8个字符之间",trigger:["blur","change"]},{type:"string",max:15,required:!0,message:"请输入账号",trigger:["blur","change"]}],reg_password:[{validator:n,trigger:["blur","change"]},{type:"string",max:15,required:!0,message:"请输入密码",trigger:["blur","change"]},{min:6,max:15,message:"密码长度在6-15个字符之间",trigger:["blur","change"]}],reg_checkPassword:[{validator:r,trigger:["blur","change"]},{type:"string",max:15,required:!0,message:"请再次输入密码",trigger:["blur","change"]},{min:6,max:15,message:"密码长度在6-15个字符之间",trigger:["blur","change"]}]}}},methods:{submit:function(){var n=this;this.$refs.loginRef.validate().then(function(){var r=a(t.default.mark((function r(o){var u;return t.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$http({url:"account/mobilelogin",method:"POST",data:{username:n.loginForm.username,password:n.loginForm.password}});case 2:u=r.sent,200==u.data.code?(n.$refs.uNotify.success("登录成功"),n.$store.commit("set_token",u.data.token),n.userdata={nickname:u.data.data.nickname,photo:u.data.data.photo,sex:u.data.data.sex,introduction:u.data.data.introduction},e.setStorageSync("username",u.data.data.username),e.setStorageSync("userdata",JSON.stringify(n.userdata)),e.switchTab({url:"../index/index"})):e.$u.toast("账号或密码错误，请重试");case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(n){e.$u.toast("登录失败，请重试")}))},findpwd:function(){e.$u.toast("请联系管理员找回")},nextbtn:function(){var n=this;if(this.regForm.reg_password!=this.regForm.reg_checkPassword)e.$u.toast("密码不一致，请重试");else{for(var r=0,o=0;o<this.regForm.reg_username.length;o++){var u=this.regForm.reg_username.charAt(o),i=/^[A-Za-z0-9]$/,s=i.test(u);0==s&&(r=1)}1==r?e.$u.toast("用户名只能为数字或字母，请修改后重试"):0==r&&this.$refs.regRef.validate().then(function(){var r=a(t.default.mark((function r(o){var u;return t.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$http({url:"account/selectusername",method:"POST",data:{username:n.regForm.reg_username}});case 2:u=r.sent,200==u.data.code?e.$u.toast("该用户名已被使用，请重新修改"):n.indexnum=1;case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(n){e.$u.toast("请填写正确后，重试")}))}},twonextbtn:function(){var n=this;this.$refs.regdataRef.validate().then((function(e){n.indexnum=2})).catch((function(n){e.$u.toast("请填写正确后，重试")}))},regbtn:function(){var n=this;return a(t.default.mark((function r(){var o;return t.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$http({url:"account/register",method:"POST",data:{reg_username:n.regForm.reg_username,reg_password:n.regForm.reg_password,reg_nickname:n.regdataForm.reg_nickname,reg_sex:n.regdataForm.reg_sex,reg_phone:n.regdataForm.reg_phone}});case 2:o=r.sent,console.log(o),200==o.data.code?(n.$refs.uNotify.success("注册成功，请登录"),e.navigateTo({url:"../login/login"})):n.$refs.uNotify.error("注册失败，请重试");case 5:case"end":return r.stop()}}),r)})))()}}};n.default=i}).call(this,r(1)["default"])},176:function(e,n,r){"use strict";r.r(n);var t=r(177),o=r.n(t);for(var u in t)"default"!==u&&function(e){r.d(n,e,(function(){return t[e]}))}(u);n["default"]=o.a},177:function(e,n,r){}},[[170,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/login.js.map