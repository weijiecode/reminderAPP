(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tally/statistics"],{290:function(t,e,a){"use strict";(function(t){a(5);i(a(3));var e=i(a(291));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=a,t(e.default)}).call(this,a(1)["createPage"])},291:function(t,e,a){"use strict";a.r(e);var i=a(292),n=a(294);for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a(296);var o,r=a(11),u=Object(r["default"])(n["default"],i["render"],i["staticRenderFns"],!1,null,"5fd3ff1f",null,!1,i["components"],o);u.options.__file="pages/tally/statistics.vue",e["default"]=u.exports},292:function(t,e,a){"use strict";a.r(e);var i=a(293);a.d(e,"render",(function(){return i["render"]})),a.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),a.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),a.d(e,"components",(function(){return i["components"]}))},293:function(t,e,a){"use strict";var i;a.r(e),a.d(e,"render",(function(){return n})),a.d(e,"staticRenderFns",(function(){return o})),a.d(e,"recyclableRender",(function(){return s})),a.d(e,"components",(function(){return i}));try{i={uIcon:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(a.bind(null,462))},qiunDataCharts:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(a.bind(null,529))},uDatetimePicker:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(a.bind(null,338))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.showdate=!0},t.e1=function(e){t.showdatepie=!0},t.e2=function(e){t.showdate=!1},t.e3=function(e){t.showdate=!1},t.e4=function(e){t.showdatepie=!1},t.e5=function(e){t.showdatepie=!1})},s=!1,o=[];n._withStripped=!0},294:function(t,e,a){"use strict";a.r(e);var i=a(295),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},295:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(a(36)),n=a(145);function s(t){return t&&t.__esModule?t:{default:t}}function o(t,e,a,i,n,s,o){try{var r=t[s](o),u=r.value}catch(c){return void a(c)}r.done?e(u):Promise.resolve(u).then(i,n)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(i,n){var s=t.apply(e,a);function r(t){o(s,i,n,r,u,"next",t)}function u(t){o(s,i,n,r,u,"throw",t)}r(void 0)}))}}var u={mixins:[n.getstatusBarHeight],onShow:function(){var e=this;return r(i.default.mark((function a(){return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.gettallyone().then((function(){e.gettally()})),e.choosedate=t.$u.timeFormat(Number(new Date)).split("-")[0]+"/"+t.$u.timeFormat(Number(new Date)).split("-")[1],e.tallyyear=t.$u.timeFormat(Number(new Date)).split("-")[0],e.choosedatepie=t.$u.timeFormat(Number(new Date)).split("-")[0]+"/"+t.$u.timeFormat(Number(new Date)).split("-")[1];case 4:case"end":return a.stop()}}),a)})))()},onReady:function(){this.getServerData(),this.getServerDatapie(),this.getServerDatapie1()},data:function(){return{topheight:"",tallydata:[],initArrtally:[],tallydatayear:[],tallyyear:"",tallydatamonth:[],btnitem:1,showdate:!1,showdatepie:!1,dateym:Number(new Date),dateympie:Number(new Date),choosedate:"",choosedatey:"",choosedatem:"",choosedatepie:"",choosedateypie:"",choosedatempie:"",innum:"",outnum:"",subnum:"",chartData:{},chartDatapie:{},chartDatapie1:{},mondatain:[0,0,0,0,0,0,0,0,0,0,0,0],mondataout:[0,0,0,0,0,0,0,0,0,0,0,0],mondatainout:[0,0,0,0,0,0,0,0,0,0,0,0],intypedata:[{name:"工资",value:0},{name:"理财",value:0},{name:"红包",value:0},{name:"兼职",value:0},{name:"现金",value:0},{name:"收银",value:0},{name:"其它",value:0}],outtypedata:[{name:"餐饮",value:0},{name:"娱乐",value:0},{name:"日用",value:0},{name:"住房",value:0},{name:"旅行",value:0},{name:"医疗",value:0},{name:"交通",value:0}],intypenum:[0,0,0,0,0,0,0,0,0,0,0,0],outtypenum:[0,0,0,0,0,0,0,0,0,0,0,0],opts:{dataPointShape:!1,dataLabel:!1,color:["#518BF1","#F06872","#aaa"],padding:[30,10,0,10],legend:{},xAxis:{axisLine:!1,fontColor:"#e1e1e1",disableGrid:!0,fontSize:8},yAxis:{fontColor:"#e1e1e1",gridType:"dash",dashLength:6,gridColor:"#ebebeb",data:[{axisLine:!1,fontColor:"#e1e1e1",fontSize:8}]},extra:{line:{type:"curve",width:2}}},optspie:{color:["#518BF1","#74C783","#FA623D","#F3B32B","#798EBB","#A97FE6","#07BD73"],padding:[30,10,0,10],extra:{pie:{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!0,borderWidth:3,borderColor:"#FFFFFF",linearType:"custom"}}}}},methods:{backmycenter:function(){t.navigateBack()},gettallyone:function(){var t=this;return r(i.default.mark((function e(){var a,n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http({url:"tally/usertally",method:"POST"});case 2:a=e.sent,n=a.data,"200"==n.code?(t.tallydata=n.data,t.fundate(),t.fundatetype()):"201"==n.code?t.initArrtally="":t.$refs.uToast.show({type:"error",icon:!1,message:"记账数据获取失败",iconUrl:"https://cdn.uviewui.com/uview/demo/toast/error.png"});case 5:case"end":return e.stop()}}),e)})))()},fundate:function(){var e=this;if(this.innum=0,this.outnum=0,this.subnum=0,this.initArrtally=[],this.tallydata.forEach((function(t,a){var i=-1,n=e.initArrtally.some((function(t,a){if(e.choosedate==t.datetime)return i=a,!0}));n?e.initArrtally[i].subList.push(t):e.initArrtally.push({datetime:t.datetime,subList:[t]})})),0!=this.initArrtally.length){t.$u.timeFormat;var a=this.initArrtally.filter((function(t){return t.datetime.substring(0,7)==e.choosedate}));this.newArrtally=a,this.newArrtally.forEach((function(t){t.subList.forEach((function(t){t.num.indexOf("-")>=0?e.outnum+=-1*t.num:e.innum+=1*t.num}))})),this.subnum=this.innum-this.outnum,this.outnum=this.outnum.toString().indexOf(".")>=0?this.outnum:this.outnum.toString()+".00",this.innum=this.innum.toString().indexOf(".")>=0?this.innum:this.innum.toString()+".00",this.subnum=this.subnum.toString().indexOf(".")>=0?this.subnum:this.subnum+".00"}},fundatetype:function(){var e=this;if(this.initArrtally=[],this.intypenum=[0,0,0,0,0,0,0],this.outtypenum=[0,0,0,0,0,0,0],this.tallydata.forEach((function(t,a){var i=-1,n=e.initArrtally.some((function(t,a){if(e.choosedatepie==t.datetime)return i=a,!0}));n?e.initArrtally[i].subList.push(t):e.initArrtally.push({datetime:t.datetime,subList:[t]})})),0!=this.initArrtally.length){t.$u.timeFormat;var a=this.initArrtally.filter((function(t){return t.datetime.substring(0,7)==e.choosedatepie}));this.newArrtally=a,this.newArrtally.forEach((function(t){t.subList.forEach((function(t){if(t.num.indexOf("-")>=0)switch(t.tallytype){case"餐饮":e.outtypenum[0]+=1*t.num;break;case"娱乐":e.outtypenum[1]+=1*t.num;break;case"日用":e.outtypenum[2]+=1*t.num;break;case"住房":e.outtypenum[3]+=1*t.num;break;case"旅行":e.outtypenum[4]+=1*t.num;break;case"医疗":e.outtypenum[5]+=1*t.num;break;case"交通":e.outtypenum[6]+=1*t.num;break}else switch(t.tallytype){case"工资":e.intypenum[0]+=1*t.num;break;case"理财":e.intypenum[1]+=1*t.num;break;case"红包":e.intypenum[2]+=1*t.num;break;case"兼职":e.intypenum[3]+=1*t.num;break;case"现金":e.intypenum[4]+=1*t.num;break;case"收银":e.intypenum[5]+=1*t.num;break;case"其它":e.intypenum[6]+=1*t.num;break}}))})),this.intypenum.forEach((function(t,a){e.intypedata[a].value=1*t})),this.outtypenum.forEach((function(t,a){e.outtypedata[a].value=1*t}))}},confirmdate:function(e){this.showdate=!1;var a=t.$u.timeFormat;this.choosedate=a(e.value,"yyyy-mm").split("-")[0]+"/"+a(e.value,"yyyy-mm").split("-")[1],this.fundate()},confirmdatepie:function(e){this.showdatepie=!1;var a=t.$u.timeFormat;this.choosedatepie=a(e.value,"yyyy-mm").split("-")[0]+"/"+a(e.value,"yyyy-mm").split("-")[1],this.fundatetype(),this.getServerDatapie(),this.getServerDatapie1()},leftdate:function(){switch(this.choosedatey=this.choosedate.split("/")[0],this.choosedate.split("/")[1]){case"01":this.choosedatey=1*this.choosedate.split("/")[0]-1,this.choosedatem="12";break;case"02":this.choosedatem="01";break;case"03":this.choosedatem="02";break;case"04":this.choosedatem="03";break;case"05":this.choosedatem="04";break;case"06":this.choosedatem="05";break;case"07":this.choosedatem="06";break;case"08":this.choosedatem="07";break;case"09":this.choosedatem="08";break;case"10":this.choosedatem="09";break;case"11":this.choosedatem="10";break;case"12":this.choosedatem="11";break;default:return}this.choosedate=this.choosedatey+"/"+this.choosedatem,this.fundate()},leftdatepie:function(){switch(this.choosedateypie=this.choosedatepie.split("/")[0],this.choosedatepie.split("/")[1]){case"01":this.choosedateypie=1*this.choosedatepie.split("/")[0]-1,this.choosedatempie="12";break;case"02":this.choosedatempie="01";break;case"03":this.choosedatempie="02";break;case"04":this.choosedatempie="03";break;case"05":this.choosedatempie="04";break;case"06":this.choosedatempie="05";break;case"07":this.choosedatempie="06";break;case"08":this.choosedatempie="07";break;case"09":this.choosedatempie="08";break;case"10":this.choosedatempie="09";break;case"11":this.choosedatempie="10";break;case"12":this.choosedatempie="11";break;default:return}this.choosedatepie=this.choosedateypie+"/"+this.choosedatempie,this.fundatetype(),this.getServerDatapie(),this.getServerDatapie1()},leftdatey:function(){this.tallyyear=1*this.tallyyear-1,this.gettally(),this.getServerData()},rightdate:function(){switch(this.choosedatey=this.choosedate.split("/")[0],this.choosedate.split("/")[1]){case"01":this.choosedatem="02";break;case"02":this.choosedatem="03";break;case"03":this.choosedatem="04";break;case"04":this.choosedatem="05";break;case"05":this.choosedatem="06";break;case"06":this.choosedatem="07";break;case"07":this.choosedatem="08";break;case"08":this.choosedatem="09";break;case"09":this.choosedatem="10";break;case"10":this.choosedatem="11";break;case"11":this.choosedatem="12";break;case"12":this.choosedatey=1*this.choosedate.split("/")[0]+1,this.choosedatem="01";break;default:return}this.choosedate=this.choosedatey+"/"+this.choosedatem,this.fundate()},rightdatepie:function(){switch(this.choosedateypie=this.choosedatepie.split("/")[0],this.choosedatepie.split("/")[1]){case"01":this.choosedatempie="02";break;case"02":this.choosedatempie="03";break;case"03":this.choosedatempie="04";break;case"04":this.choosedatempie="05";break;case"05":this.choosedatempie="06";break;case"06":this.choosedatempie="07";break;case"07":this.choosedatempie="08";break;case"08":this.choosedatempie="09";break;case"09":this.choosedatempie="10";break;case"10":this.choosedatempie="11";break;case"11":this.choosedatempie="12";break;case"12":this.choosedateypie=1*this.choosedatepie.split("/")[0]+1,this.choosedatempie="01";break;default:return}this.choosedatepie=this.choosedateypie+"/"+this.choosedatempie,this.fundatetype(),this.getServerDatapie(),this.getServerDatapie1()},rightdatey:function(){this.tallyyear=1*this.tallyyear+1,this.gettally(),this.getServerData()},gettally:function(){var t=this;this.tallydatayear=[],this.tallydatamonth=[],this.tallydata.forEach((function(e){var a=-1,i=t.tallydatayear.some((function(t,i){if(e.datetime.split("/")[0]==t.datetime.split("/")[0])return a=i,!0}));i?t.tallydatayear[a].subList.push(e):t.tallydatayear.push({datetime:e.datetime.split("/")[0],subList:[e]})})),this.tallydatayear.forEach((function(e){e.datetime==t.tallyyear&&e.subList.forEach((function(e){t.tallydatamonth.push({datetime:e.datetime.split("/")[1],num:e.num})}))})),this.mondatain=[0,0,0,0,0,0,0,0,0,0,0,0],this.mondataout=[0,0,0,0,0,0,0,0,0,0,0,0],this.mondatainout=[0,0,0,0,0,0,0,0,0,0,0,0],this.tallydatamonth.forEach((function(e){switch(e.datetime){case"01":1*e.num>0?t.mondatain[0]+=1*e.num:t.mondataout[0]+=1*e.num;break;case"02":1*e.num>0?t.mondatain[1]+=1*e.num:t.mondataout[1]+=1*e.num;break;case"03":1*e.num>0?t.mondatain[2]+=1*e.num:t.mondataout[2]+=1*e.num;break;case"04":1*e.num>0?t.mondatain[3]+=1*e.num:t.mondataout[3]+=1*e.num;break;case"05":1*e.num>0?t.mondatain[4]+=1*e.num:t.mondataout[4]+=1*e.num;break;case"06":1*e.num>0?t.mondatain[5]+=1*e.num:t.mondataout[5]+=1*e.num;break;case"07":1*e.num>0?t.mondatain[6]+=1*e.num:t.mondataout[6]+=1*e.num;break;case"08":1*e.num>0?t.mondatain[7]+=1*e.num:t.mondataout[7]+=1*e.num;break;case"09":1*e.num>0?t.mondatain[8]+=1*e.num:t.mondataout[8]+=1*e.num;break;case"10":1*e.num>0?t.mondatain[9]+=1*e.num:t.mondataout[9]+=1*e.num;break;case"11":1*e.num>0?t.mondatain[10]+=1*e.num:t.mondataout[10]+=1*e.num;break;case"12":1*e.num>0?t.mondatain[11]+=1*e.num:t.mondataout[11]+=1*e.num;break;default:return}}));for(var e=0;e<12;e++)this.mondatainout[e]=1*this.mondatain[e]+1*this.mondataout[e]},getServerData:function(){var t=this;setTimeout((function(){var e={categories:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],series:[{name:"收入",data:t.mondatain},{name:"支出",data:t.mondataout},{name:"结余",data:t.mondatainout}]};t.chartData=JSON.parse(JSON.stringify(e))}),500)},getServerDatapie:function(){var t=this;setTimeout((function(){var e={series:[{data:t.intypedata}]};t.chartDatapie=JSON.parse(JSON.stringify(e))}),500)},getServerDatapie1:function(){var t=this;setTimeout((function(){var e={series:[{data:t.outtypedata}]};t.chartDatapie1=JSON.parse(JSON.stringify(e))}),500)},inbtnitem:function(){this.btnitem=1},outbtnitem:function(){this.btnitem=0}}};e.default=u}).call(this,a(1)["default"])},296:function(t,e,a){"use strict";a.r(e);var i=a(297),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},297:function(t,e,a){}},[[290,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/tally/statistics.js.map